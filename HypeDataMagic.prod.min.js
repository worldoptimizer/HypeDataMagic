/*
 Hype DataMagic (Core) 1.0
copyright (c) 2020 Max Ziebell, (https://maxziebell.de). MIT-license
*/
!1==="HypeDataMagic"in window&&(window.HypeDataMagic=function(){function w(a,b,c){if(c.handler&&"object"==typeof k[c.handler]&&"function"==typeof k[c.handler][c.type])try{k[c.handler][c.type](a,b,c)}catch(d){console.log('There was an error in your handler "'+c.handler+'": ',d)}}function p(a,b,c){if(b.getAttribute("data-magic-key")){var d=x(b,"data-magic-source")||g.source,e=y(b.getAttribute("data-magic-key")),f="customData"==d?a.customData:z(d);if(f){var h=x(b,"data-magic-branch");f=h?A(a,f,h):f;
if(f=A(a,f,e)){if("object"!=typeof f){h=b.getAttribute("data-magic-prefix")||"";var C=b.getAttribute("data-magic-append")||"";f=h+f+C}c=Object.assign(c||{},{data:f,source:d,key:e,handler:b.getAttribute("data-magic-handler")||f.handler||"text"});(c.type?c.type.replace("HypeScene","DataMagic").split():["DataMagicPrepareForDisplay","DataMagicLoad"]).forEach(function(D){w(a,b,Object.assign(c,{type:D}))})}else q(a,b)}}}function q(a,b,c){c=c||{};c.type||(c.type="DataMagicUnload");c.handler=c.oldHandler||
b.getAttribute("data-magic-handler")||"text";w(a,b,c)}function E(a,b){m[a.documentId()]||(m[a.documentId()]={changeObserver:new MutationObserver(function(c){c.forEach(function(d){if("attributes"==d.type){var e=d.target,f=d.attributeName,h=y(e.getAttribute(f));d=d.oldValue;if(h!=d)switch(f){case "data-magic-key":h?p(a,e):q(a,e);break;case "data-magic-source":case "data-magic-branch":q(a,e);n(a,e);break;case "data-magic-handler":q(a,e,{oldHandler:d}),n(a,e)}}})}),options:{subtree:!0,attributes:!0,attributeFilter:["data-magic-key",
"data-magic-source","data-magic-branch","data-magic-handler"],attributeOldValue:!0},enable:function(){this.changeObserver.observe(b,this.options)},disable:function(){this.changeObserver.disconnect()}})}function t(a){m[a.documentId()]&&m[a.documentId()].enable()}function u(a){m[a.documentId()]&&m[a.documentId()].disable()}function B(a,b,c){b&&b.querySelectorAll("[data-magic-key]").forEach(function(d){p(a,d,c)})}function n(a,b,c){b&&(b&&p(a,b,c),B(a,b,c))}function z(a){return g.sourceRedirect[a]?r[g.sourceRedirect[a]]||
null:a?r[a]||null:r[g.source]||null}function y(a){if("string"==typeof a)return a.trim()}function A(a,b,c){if("object"==typeof b&&"string"==typeof c){c=c.replace(/\[(\d+)\]/g,function(f,h){return"."+parseInt(h)});c=c.replace(/^\./,"");a=c.split(".");for(var d=0,e=a.length;d<e;++d){if("object"!=typeof b)return;c=a[d];if(!b.hasOwnProperty(c))return;b=b[c]}return b}}function x(a,b){if(!a||!a.id)return null;var c=a.id;l[c]||(l[c]={});if(l[c][b]&&l[c][b].hasAttribute(b))return l[c][b].getAttribute(b);for(;a.parentNode&&
!a.classList.contains("HYPE_scene");){if(a.hasAttribute(b))return l[c][b]=a,a.getAttribute(b);a=a.parentNode}delete l[c][b];return null}var r={},l={},m={},v=[],g={source:"shared",fallbackImage:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="},fetchResponseCallback:function(a){return a.json()},fetchErrorCallback:function(a,b){},fetchDataCallback:function(a,b){},handlerMixin:{},sourceRedirect:{},customDataForPreview:{}},
k={text:{DataMagicPrepareForDisplay:function(a,b,c){b.innerHTML!=c.data&&(b.innerHTML=c.data)},DataMagicUnload:function(a,b,c){b.querySelectorAll(".HYPE_element, .HYPE_element_container").length||(b.innerHTML="")}},image:{DataMagicPrepareForDisplay:function(a,b,c){"string"==typeof c.data&&(c.data={src:c.data});c.data.src||(c.data.src=b.dataset.fallbackImage||g.fallbackImage());b.innerHTML="";a.getElementProperty(b,"background-image")!=c.data.src&&(b.style.backgroundRepeat="no-repeat",b.style.backgroundPosition=
c.data.backgroundPosition||b.dataset.backgroundPosition||"center center",b.style.backgroundSize=c.data.backgroundSize||b.dataset.backgroundSize||"contain",a.setElementProperty(b,"background-image",c.data.src))},DataMagicUnload:function(a,b,c){a.setElementProperty(b,"background-image","");b.style.backgroundRepeat=b.style.backgroundPosition=""}}};!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,b,c){a.refresh=
function(d){n(this,d||document.getElementById(this.currentSceneId()))};a.refreshDescendants=function(d){B(this,d||document.getElementById(this.currentSceneId()))};a.refreshElement=function(d){d&&p(this,d,void 0)};a.disableChangeObserver=function(){u(this)};a.enableChangeObserver=function(){t(this)};a.setContentIfNecessary=function(d,e){d.innerHTML!=e&&(d.innerHTML=e)};E(a,b);t(a)}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,b,c){u(a);n(a,b,c)}});window.HYPE_eventListeners.push({type:"HypeSceneLoad",
callback:function(a,b,c){n(a,b,c);v&&(v.forEach(function(d){d()}),v=null);t(a)}});window.HYPE_eventListeners.push({type:"HypeSceneUnload",callback:function(a,b,c){u(a)}});return{version:"1.0",setData:function(a,b){b=b||g.source;r[b]=a},getData:z,setDefault:function(a,b){g[a]=b},getDefault:function(a){return g[a]},addDataHandler:function(a,b){if("string"!=!typeof a)switch(typeof b){case "object":k[a]=Object.assign({},g.handlerMixin,b);break;case "function":k[a]=Object.assign({},g.handlerMixin,k.text),
k[a].DataMagicPrepareForDisplay=b}}}}());